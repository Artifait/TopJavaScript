<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кредитный калькулятор</title>
    <link rel="stylesheet" href="DarkTheme.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .calculator {
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #444;
            border-radius: 10px;
            background-color: #222;
        }

        .calculator label {
            display: block;
            margin-bottom: 8px;
            font-size: 1rem;
            color: #ccc;
        }

        .calculator input {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 20px;
            border: 1px solid #555;
            border-radius: 5px;
            background-color: #333;
            color: #fff;
        }

        .calculator button {
            padding: 10px 20px;
            background-color: #10b981;
            border: none;
            border-radius: 5px;
            color: #fff;
            font-size: 1rem;
            cursor: pointer;
            margin-bottom: 20px;
        }

        .calculator button:hover {
            background-color: #0e9b75;
        }

        .chart-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
<div class="calculator">
    <h2>Кредитный калькулятор</h2>
    <label for="loan-amount">Сумма кредита (₽):</label>
    <input type="number" id="loan-amount" placeholder="Введите сумму кредита" />

    <label for="interest-rate">Процентная ставка (%):</label>
    <input type="number" id="interest-rate" placeholder="Введите процентную ставку" />

    <label for="loan-years">Срок кредита (лет):</label>
    <input type="number" id="loan-years" placeholder="Введите срок кредита" />

    <button onclick="calculateLoan()">Рассчитать</button>

    <div class="results">
        <p id="monthly-payment"></p>
        <p id="total-payment"></p>
        <p id="total-interest"></p>
    </div>

    <div class="chart-container">
        <canvas id="loanChart"></canvas>
    </div>
</div>

<script>
    let loanChart;

    function calculateLoan() {
        const amount = parseFloat(document.getElementById('loan-amount').value);
        const rate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
        const years = parseInt(document.getElementById('loan-years').value);
        const months = years * 12;

        if (isNaN(amount) || isNaN(rate) || isNaN(years) || amount <= 0 || rate <= 0 || years <= 0) {
            alert('Пожалуйста, введите корректные данные.');
            return;
        }

        const x = Math.pow(1 + rate, months);
        const monthlyPayment = (amount * x * rate) / (x - 1);
        const totalPayment = monthlyPayment * months;
        const totalInterest = totalPayment - amount;

        document.getElementById('monthly-payment').textContent = `Ежемесячный платеж: ${monthlyPayment.toFixed(2)} ₽`;
        document.getElementById('total-payment').textContent = `Общая сумма выплат: ${totalPayment.toFixed(2)} ₽`;
        document.getElementById('total-interest').textContent = `Переплата по кредиту: ${totalInterest.toFixed(2)} ₽`;

        // Update chart data
        const chartData = {
            labels: ['Основной долг', 'Переплата'],
            datasets: [{
                data: [amount, totalInterest],
                backgroundColor: ['#10b981', '#ef4444'],
            }]
        };

        if (loanChart) {
            loanChart.destroy();
        }

        const ctx = document.getElementById('loanChart').getContext('2d');
        loanChart = new Chart(ctx, {
            type: 'pie',
            data: chartData,
        });
    }
</script>
</body>
</html>
